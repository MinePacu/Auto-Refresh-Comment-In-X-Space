# <img src="public/icons/icon_48.png" width="45" align="left"> Auto Refresh Comment In X Space

X (구 트위터) 스페이스 댓글을 자동으로 최신순으로 정렬해주는 Chrome 확장 프로그램입니다.

![Version](https://img.shields.io/badge/version-1.0.2-blue.svg)
![Manifest](https://img.shields.io/badge/manifest-v3-green.svg)
![Chrome](https://img.shields.io/badge/Chrome-Extension-yellow.svg)

> 📌 **주요 기능**: X 스페이스에서 실시간으로 새로운 댓글을 확인할 수 있도록 자동 새로고침 및 최신순 정렬을 제공합니다.

## 🌟 핵심 기능

### 🔄 자동 댓글 정렬
- **스마트 자동화**: X 스페이스의 댓글을 지정된 주기로 자동 최신순 정렬
- **적응형 동작**: 첫 번째 새로고침은 스크롤+맨위이동+버튼클릭, 이후는 버튼클릭만 수행
- **마스터 제어**: ON/OFF 토글로 전체 기능을 간편하게 제어

### ⚙️ 고급 설정
- **새로고침 주기**: 8초~3600초(1시간) 범위에서 정밀 설정 (기본값: 10초)
  - **X Rate Limit 보호**: X API Rate Limit (150 requests/15분)을 고려한 최소 8초 제한
  - **자동 조정**: 제한 미만 값 입력 시 자동으로 안전한 값으로 조정
- **클릭 간 대기시간**: 1ms~10000ms 범위에서 미세 조정 (기본값: 700ms)
- **테마 지원**: 라이트/다크/시스템 설정에 따른 자동 테마 전환
- **탭별 독립 설정**: 각 탭마다 독립적인 마스터 ON/OFF 상태 관리
- **설정 동기화**: Chrome 동기화를 통한 모든 기기 간 설정 공유

### 🎯 인텔리전트 감지
- **페이지 감지**: X 스페이스 상세 페이지 자동 인식
- **상태 인식**: 스페이스 청취 상태 실시간 감지 (참여했습니다/일시정지 상태 구분)
- **조건부 실행**: 모든 조건 충족 시에만 자동 활성화
- **SPA 지원**: 페이지 이동 시 즉시 상태 반영 및 자동 제어
- **탭별 독립 운영**: 여러 탭에서 각각 독립적으로 동작
- **백그라운드 관리**: 탭 생성/제거 시 자동 설정 관리

### 🚀 사용자 경험
- **무음 모드**: 마스터 OFF 시 완전한 조용한 상태 유지
- **실시간 피드백**: 상태별 명확한 메시지 표시 (답글 개수 포함)
- **오류 처리**: 네트워크 오류 및 통신 실패 시 안정적인 fallback
- **즉시 응답**: 마스터 상태 변경 시 즉시 시작/중단
- **Rate Limit 보호**: X API 제한 초과 방지를 위한 자동 간격 조정
- **시각적 피드백**: 설정 조정 시 즉시 알림 및 상태 표시

## 🚀 설치 방법

### 개발자 모드로 설치
1. 이 저장소를 다운로드하거나 클론합니다
2. `npm install`로 의존성을 설치합니다
3. `npm run build`로 확장 프로그램을 빌드합니다
4. Chrome에서 `chrome://extensions` 페이지를 엽니다
5. 개발자 모드를 활성화합니다
6. "압축해제된 확장 프로그램을 로드합니다"를 클릭합니다
7. `build` 폴더를 선택합니다

## 📖 사용법

### 1. 기본 사용
1. **X 접속**: X(트위터)에 로그인하여 접속합니다
2. **스페이스 진입**: 원하는 스페이스의 상세 페이지로 이동합니다
3. **확장 프로그램 실행**: 브라우저 상단의 확장 프로그램 아이콘을 클릭합니다
4. **마스터 활성화**: 팝업에서 **마스터 버튼**을 `ON`으로 설정합니다
5. **자동 정렬 시작**: 모든 조건이 충족되면 댓글이 자동으로 최신순 정렬됩니다

### 2. 상태 메시지 이해하기
- **상태: 비활성**: 마스터 OFF 상태 (모든 기능 정지)
- **상태: X(트위터) 접속 대기 중**: X 사이트 접속 대기 중
- **상태: 스페이스 트윗 대기 중**: 스페이스 상세 페이지 진입 대기 중
- **상태: 스페이스 청취 대기 중**: 스페이스 청취 상태 대기 중
- **상태: 활성 중 (답글: N개)**: 정상 작동 중 (댓글 자동 정렬 실행)
- **조정됨: N초**: Rate Limit으로 인해 새로고침 간격이 자동 조정됨
- **조정됨: Nms**: 클릭 간 대기시간이 최솟값(5ms) 제한으로 인해 자동 조정됨

> 💡 **팁**: 실시간 상태 확인을 위해 팝업을 열어두면 1초마다 상태가 업데이트됩니다.

### 3. 고급 설정
#### 새로고침 주기 조정
- 값 입력 후 **"적용"** 버튼 클릭
- **최소값**: 8초 (X Rate Limit 정책에 따른 제한)
- **권장값**: 10-30초 (네트워크 상황에 따라 조정)
- **자동 조정**: 8초 미만 입력 시 자동으로 8초로 설정
- **Rate Limit 보호**: X API 제한(150 requests/15분)을 고려한 안전한 간격 유지

#### 클릭 간 대기시간 조정
- 값 입력 후 **"적용"** 버튼 클릭
- **권장값**: 500-1000ms (컴퓨터 성능에 따라 조정)
- **용도**: UI 버튼 클릭 사이의 안정적인 대기시간 확보

#### 테마 선택
- **라이트**: 밝은 테마 (기본)
- **다크**: 어두운 테마
- **시스템 설정**: 운영체제 설정에 따라 자동 전환

### 4. 문제 해결
- **기능이 작동하지 않는 경우**: 마스터를 OFF → ON으로 다시 설정
- **상태가 업데이트되지 않는 경우**: 팝업을 닫았다가 다시 열기
- **설정이 저장되지 않는 경우**: Chrome 동기화 설정 확인

### 5. 개발자 옵션 활용
- **콘솔 로그 활성화**: 팝업 하단의 "🔧 개발자 옵션"을 클릭하여 펼친 후 "콘솔 로그: ON" 설정
- **디버그 로그 확인**: 브라우저 개발자 도구(F12) → Console 탭에서 상세한 실행 로그 확인
- **문제 진단**: 콘솔 로그를 통해 감지 상태, 새로고침 주기, 클릭 동작 등의 상세 정보 확인



## 🔄 새로고침 주기별 동작 로직

X 스페이스에서 효율적인 댓글 관리를 위해 첫 번째와 이후 새로고침 주기의 동작이 다르게 설계되었습니다:

#### 첫 번째 새로고침 주기
1. **스크롤 다운**: 페이지 하단으로 이동하여 새로운 댓글 로드
2. **맨위 이동**: 페이지 상단으로 스크롤하여 UI 버튼에 접근 가능한 위치로 이동
3. **답글 설정 버튼 클릭**: 댓글 정렬 옵션 메뉴 열기
4. **최신순 정렬 버튼 클릭**: 댓글을 최신순으로 정렬

#### 이후 새로고침 주기들
1. **답글 설정 버튼 클릭**: 댓글 정렬 옵션 메뉴 열기
2. **최신순 정렬 버튼 클릭**: 댓글을 최신순으로 정렬
   
*스크롤 동작은 생략하여 불필요한 페이지 이동을 방지하고 사용자 경험을 개선합니다.*

#### 동작 로직 장점
- **효율성**: 첫 번째 로드 후에는 불필요한 스크롤 제거
- **사용자 경험**: 페이지 위치 유지로 댓글 읽기 연속성 보장
- **안정성**: 단계별 동작으로 UI 버튼 인식 및 클릭 성공률 향상

##  연락처 및 지원

### 🆘 문제 해결
**문제가 발생하시나요?** 
- 📋 [Issues 페이지](https://github.com/your-repo/issues)에서 문제를 신고해주세요
- 🔍 기존 이슈를 먼저 검색해보세요
- 💬 상세한 정보를 제공해주시면 빠른 해결이 가능합니다

### 📈 업데이트 정보
- 새로운 기능 및 버그 수정 사항은 [Releases](https://github.com/your-repo/releases)에서 확인하세요
- 중요한 업데이트는 확장 프로그램을 통해 자동 알림됩니다

---
